# netwhat

## Protocol
- 통신 규약
- 수신자 (Receiver) 와 발신자 (Sender) 상호 간의 규칙을 명시한 것
	- 메시지의 형식 (Format) 이 어떠한지?
	- 네트워크 개체 간에 수신받을 메시지 순서 (Order) 는 어떠한지
	- 해당 메시지를 수신받았거나 송신할 때 취할 행동 (Action) 이 어떠한지
	- 위의 세 가지 중 하나라도 지키지 못하면 통신이 무용지물이 되어 버린다
- 이것을 지킴으로써 통신을 효율적으로 진행하거나, 특정 목적을 달성한다
- 굳이 통신 규약이 있는 이유는, 컴퓨터나 전자 기기 등은 모두 운영체제나 구현된 언어가 다르기 때문에 네트워크에서만큼은 이들이 통신하기 위해 하나의 공통된 프로토콜이 필요했기 때문
	- 원래는 장비 제조사마다 서로 다른 프로토콜을 사용했으나, 다른 회사의 장비끼리의 통신도 구현하기 위해 국제 표준을 위한 ISO 위원회가 발족되고 TCP/IP가 전 세계 표준이 되었다

## Protocol Layering & OSI7
- [OSI 7계층](2_OSI7.md) 참고

## IP
- Internet Protocol
- OSI 7계층중 3번째 계층 (네트워크 계층) 을 담당하고, IP 패킷의 전달 및 라우팅을 담당
- 패킷을 목적지까지 전달하는 역할 및 그에 수반되는 기타 역할을 함

## IP 주소
- IP 통신에 필요한 고유 주소
- 네트워킹이 가능한 장비를 식별하는 주소
	- 이때 네트워킹이 가능한 장비는 PC, 서버용 장비, 스마트폰 등 인터넷에 연결되는 모든 장비
	- 장비들의 주민등록번호 같은 느낌이다
- 네트워크에서 통신을 하기 위해선 통신 규약 (프로토콜) 을 따라야 함
- 이때 이러한 통신 규약 중 하나가 **장비들에게 숫자 12개의 고유 주소를 주어서 통신 상대를 구분할 것** 이다 (IPv4)
	- 000.000.000.000
	- 이렇게 12자리 주소가 통신기기에 부여되기 때문에 프로토콜을 지킨 걸로 간주되어 인터넷이 가능케 됨
	- 각 3개의 숫자는 8비트씩 변환할 수 있다 (000 ~ 255) => 총 32비트
	```
	192.		168.		0.			1
	11000000. 	10101000.	00000000. 	00000001
	```
	- 각 8비트 숫자는 옥텟이라고 부른다 (물론 이진수가 알아보기 힘들어서 십진수로 쓰는 것)
	- 앞의 세 자리는 네트워크 주소, 마지막 한 자리는 호스트 IP이다
- IPv6이라고 더 긴 버전도 있는데 (IPv4의 40억개가 부족하다고 판단되어서 늘어난 결과) 이것은 아직 많이 보급되지 않은듯
	- IPv6은 16진수 2바이트씩 8개, 총 128비트를 사용한다
	- 2001 : 0DB8 : 0000 : 0000 : 0000 : 0000 : 1428 : 57ab

### IP Class
- IP 주소는 클래스로 구분되는데, 일반적으로 A, B, C 세 가지로 나눠진다
	- (D, E가 존재하긴 하지만 일반 사용자가 사용하는 일은 적음)
- 각 클래스별로 서로 다른 서브넷 마스크를 갖고 있음

#### Class A
- 기본 서브넷 마스크 : 255.0.0.0
- 첫 번째 옥텟 : 0 ~ 127 사이의 값 (예시: 50.24.88.19, 100.13.28.99 등)
	- 첫 번째 옥텟이 0 으로 시작 (00000000. ~ 01111111.) => 0 ~ 127
- 첫 번째 옥텟만이 네트워크 주소, 나머지 세 개의 옥텟이 서브넷 / 호스트로 사용

#### Class B
- 기본 서브넷 마스크 : 255.255.0.0
- 첫 번째 옥텟 : 128 ~ 191 사이의 값 (예시: 160.125.11.4 등)
	- 첫 번째 옥텟이 10 으로 시작 (10000000. ~ 10111111.) => 128 ~ 191
- 첫 번째와 두 번째 옥텟이 네트워크 주소, 나머지 두 개의 옥텟이 서브넷 / 호스트로 사용

#### Class C
- 기본 서브넷 마스크 : 255.255.255.0
- 첫 번째 옥텟 : 192 ~ 223 사이의 값 (예시 : 192.168.123.123 등)
	- 첫 번째 옥텟이 110으로 시작 (11000000. ~ 11011111.) => 192 ~ 223
- 첫 번째, 두 번째, 세 번째 옥텟이 네트워크 주소, 나머지 한 개의 옥텟이 서브넷 / 호스트로 사용

#### Class D
- Multicasting을 위한 IP 주소
- 첫 번째 옥텟이 1110으로 시작 (11100000. ~ 11101111.)

#### Class E
- 특정 목적이 정해져 있는 활동을 위한 IP 주소
- 첫 번째 옥텟이 1111으로 시작 (11110000. ~ 11111111.)

### Private IP, Public IP
- Public IP는 인터넷 망에서 사용하는 주소로, 통신사 등에서 할당받아 사용한다
- Public IP는 전세계 통틀어도 겹치는 사람이 없음 (유일한 IP 주소)
- Public IP는 외부에 공개되어 있기 때문에 인터넷에 연결된 다른 PC로부터 접근이 가능하다
	- 따라서 보안 프로그램 설치 필수
- Private IP는 개인용 IP 주소로, 일반 가정이나 회사 등에 할당된 네트워크 주소
- Private IP로는 인터넷에 직접 연결할 수 없음
	- 라우터 (공유기) 에서는 한 개의 Public IP만 할당해준 뒤, 이것을 라우터에 연결 된 개인 전자기기끼리 Private IP를 할당받아 Public IP에 같이 접속할 수 있게 됨
	- 전자기기에서 인터넷으로 데이터를 보낼 때는 라우터에서 Private IP를 Public IP로 변환하여 전송
	- 인터넷에서 데이터를 수신받을 때는 라우터에서 목적지를 Private IP로 변환해준 후 각각의 전자기기로 전송
- Private IP의 대역은 다음 세 가지로 고정된다
	- Class A : 10.0.0.0 ~ 10.255.255.255
	- Class B : 172.16.0.0 ~ 172.31.255.255
	- Class C : 192.168.0.0 ~ 192.168.255.255

### Multicast, Broadcast
- Multicast : 데이터를 받길 원하는 특정 호스트들에게만 데이터를 전송할 수 있음
	- 예를 들어 200명의 사용자 중 총 100명한테만 데이터를 보내고 싶을 때
	- 물론 스위치나 라우터가 기능을 지원해주어야 함
- Broadcast : 로컬에 존재하는 모든 네트워크 장비들 (호스트들) 에게 데이터 전송
	- 데이터 수신이 필요없는 호스트들에게까지 데이터가 전송되기 때문에, 불필요한 인터럽트가 발생한다는 단점은 있음
	- DHCP 사용 시나 Server의 서비스 제공 안내, Router끼리의 정보 교환 등에 사용

# Subnet
- 클래스 A, B, C TCP/IP 네트워크는 시스템 관리자에 의해 더 작은 단위로 쪼개질 수 있다
	- 인터넷의 논리적 주소 체계와 실제로 사용되는 네트워크를 맞출 때 작업이 필요함
	- 너무 큰 Broadcast domain은 네트워크 환경에서 패킷 전송을 느리게 하고 성능저하를 발생시키므로, 서브넷 마스크를 이용하면 필요한 네트워크 주소만 호스트 IP로 할당할 수 있게 만들어 네트워크 낭비를 방지한다
- 특정 네트워크 주소 abc. def. ghi. 0을 할당 받았을 때, 실제로 사용할 수 있는 주소는 abc. def. ghi. 1 ~ abc. def. ghi. 254까지이다
	- 호스트가 모두 0인 주소는 네트워크만을 지정하는 데에 사용
	- 호스트가 모두 1인 주소는 네트워크상의 모든 호스트에 메시지를 브로드캐스트하는 데 사용
	- 따라서 특정 네트워크 주소 하나당 IP를 제공받을 수 있는 호스트는 254대이다

## Netmask & Subnet Mask
- 네트워크 주소 부분의 비트를 1로 치환한 것, 이것을 이용하여 IP 주소의 네트워크 부분을 가리거나 걸러서 호스트 컴퓨터의 주소 부분만 필터링하도록 하는 문자열
- TCP/IP 프로토콜에서 호스트가 로컬 서브넷에 있는지, 원격 네트워크에 있는지를 확인하기 위해 사용
- IP 주소와 넷마스크를 and연산 하면 네트워크 주소를 얻을 수 있다
	- IP 주소와 길이가 똑같음 (32비트)
- 일반적으로 255.255.255.0 을 많이들 사용한다
	- 11111111.		11111111.		11111111.		00000000
	- 이때 서브넷 마스크가 1인 부분 (앞의 24비트) 는 네트워크 주소를 나타냄
	- 서브넷 마스크가 0인 부분 (뒤의 8비트) 는 호스트 주소를 나타냄)
	- 예를 들어, IPv4가 192.168.0.1일 경우
		- 서브넷 마스크를 씌워서 반환되는 부분 (192.168.0) 은 네트워크 주소
		- 서브넷 마스크를 씌워서 사라지는 부분 (.1) 은 호스트 주소
	- 서브넷 마스크에서 1은 무조건 연속으로 나와야 함 (~ 11111111. 11101111 이런 식 안됨)
- 서브넷 마스크의 마지막 옥텟 처음 두 자릿수는 네트워크 주소가 됨
- 서브넷마스크와 넷마스크는 비슷한 개념이나 네트워크를 더 잘게 쪼개면서 서브넷과 서브넷 마스크가 생겼다
	- 현재는 CIDR (Classless Inter-Domain Routing) 이후 서브넷 마스크만을 사용하는 추세
	- 따라서 서브넷마스크와 넷마스크를 명확히 구분하지 않는다

## Subnet mask 계산
- 예시 : C클래스 (기본 서브넷마스크 : 255.255.255.0)
	- 이때 호스트 영역 (마지막 옥텟) 을 조금 빌려와 네트워크 영역으로 사용자 지정할 수 있음
	- 예시 : 255.255.255.248 (11111111.11111111.11111111.11111000)
	- 이때 서브넷 네트워크의 개수는 마지막 옥텟에서 1이 차지하는 개수인 5를 지수로 하여 2^5개
	- 호스트 IP의 개수는 마지막 옥텟에서 0이 차지하는 개수인 3을 지수로 하여 2^3개
		- 단, 000 (네트워크 지정용 주소) 와 111 (브로드캐스팅용 주소) 를 제외하므로 총 6개의 호스트 할당 가능
- 예시 : C클래스 (기본 서브넷마스크 : 255.255.255.0)
	- 서브넷 마스크가 255.255.255.192 (11111111.11111111.11111111.11000000) 라 하면
	- 서브넷 네트워크의 개수는 1이 차지하는 개수 2 => 2^2개 = 4개
	- 호스트 IP의 개수는 0이 차지하는 개수 6 => 2^6개 = 64개, 단 네트워크와 브로드캐스팅 주소 제외하면 62개
	- 따라서 서브넷 마스크에 따라 IP 주소를 서로 다른 네트워크에 배치할 수 있다
		- 192.168.123.71과 192.168.123.133은 서브넷 마스크가 255.255.255.0일 땐 같은 네트워크 192.168.123.0에 존재
		- 하지만 서브넷 마스크가 255.255.255.192라면 192.168.123.71은 192.168.123.64 네트워크에 존재하고, 192.168.123.133은 192.168.123.128 네트워크에 존재함

## CIDR
- Classless Inter-Domain Routing
- 클래스 없는 도메인간 라우팅 기법, 따라서 네트워크 구분을 클래스별로 하지 않는다는 의미이다

